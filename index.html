<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Stake Secure</title>
<link rel="stylesheet" href="style.css">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

</head>
<body>

<!-- Login -->
<div id="loginBox" class="box">
  <h2>๐ ุชุณุฌูู ุงูุฏุฎูู</h2>
  <input id="loginUser" placeholder="ุงุณู ุงููุณุชุฎุฏู">
  <input id="loginPass" type="password" placeholder="ูููุฉ ุงููุฑูุฑ">

  <label style="display:block;margin-top:5px;">
    <input type="checkbox" id="rememberMe">
    ุชุฐูุฑูู ูู ูุฐุง ุงูุฌูุงุฒ
  </label>

  <button onclick="login()">ุฏุฎูู</button>
  <p id="loginMsg"></p>

  <button onclick="showRegister()">ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ</button>
  <button onclick="showReset()">ูุณูุช ูููุฉ ุงููุฑูุฑ</button>
</div>

<!-- Register -->
<div id="registerBox" class="box" style="display:none">
  <h2>๐งพ ุฅูุดุงุก ุญุณุงุจ</h2>
  <input id="regUser" placeholder="ุงุณู ุงููุณุชุฎุฏู">
  <input id="regPass" type="password" placeholder="ูููุฉ ุงููุฑูุฑ">
  <input id="regPin" placeholder="PIN (5 ุฃุฑูุงู)" maxlength="5">
  <button onclick="register()">ุฅูุดุงุก</button>
  <p id="regMsg"></p>

  <button onclick="showLogin()">ุฑุฌูุน</button>
</div>

<!-- Reset Password -->
<div id="resetBox" class="box" style="display:none">
  <h2>โป๏ธ ุงุณุชุฑุฌุงุน ูููุฉ ุงููุฑูุฑ</h2>
  <input id="resetUser" placeholder="ุงุณู ุงููุณุชุฎุฏู">
  <input id="resetPin" placeholder="PIN" maxlength="5">
  <input id="newPass" type="password" placeholder="ูููุฉ ุณุฑ ุฌุฏูุฏุฉ">
  <button onclick="resetPassword()">ุชุบููุฑ</button>
  <p id="resetMsg"></p>

  <button onclick="showLogin()">ุฑุฌูุน</button>
</div>

<!-- Main -->
<div id="mainDiv" style="display:none">

  <!-- Profile -->
  <div id="profileDiv" class="box">
    <h2>โ๏ธ ุฅุนุฏุงุฏุงุช ุงูุญุณุงุจ</h2>
    <p>๐ค ุงููุณุชุฎุฏู: <span id="profileUsername"></span></p>

    <div id="cardRegister">
      <h3>ุฑุจุท ุจุทุงูุฉ ุงูุจูู</h3>
      <input id="stakeCard" placeholder="ุฑูู ุงูุจุทุงูุฉ">
      <input id="stakeCvv" placeholder="CVV">
      <button onclick="saveCardInfo()">ุชุฃููุฏ</button>
      <p id="msgCard"></p>
    </div>

    <div id="cardDone" style="display:none">
      <h3>โ๏ธ ุงูุจุทุงูุฉ ูุฑุจูุทุฉ</h3>
      <p>ุชู ุญูุธ ุงูุจุทุงูุฉ ููุง ูููู ุชุนุฏูููุง.</p>
    </div>

    <button onclick="showGames()">๐ฎ ุงููุชุฌุฑ</button>
    <button onclick="logout()">๐ช ุฎุฑูุฌ</button>
  </div>

  <!-- Games -->
  <div id="gamesDiv" class="box" style="display:none">
    <h2><span id="balanceDisplay">0$</span></h2>

    <h3>๐ณ ุดุญู ุงูุฑุตูุฏ</h3>
    <div class="btn-row">
      <button onclick="openConfirmModal(5)">5$</button>
      <button onclick="openConfirmModal(10)">10$</button>
      <button onclick="openConfirmModal(25)">25$</button>
      <button onclick="openConfirmModal(50)">50$</button>
    </div>
    <p id="msgRecharge"></p>

    <h3>๐ธ ุณุญุจ ุงูุฑุตูุฏ</h3>
    <div class="btn-row">
      <button onclick="withdrawFixed(5)">5$</button>
      <button onclick="withdrawFixed(10)">10$</button>
      <button onclick="withdrawFixed(25)">25$</button>
      <!-- ๐ก ุฒุฑ ุงูุณุญุจ ุจูุจูุบ ูุฎุตุต -->
      <button onclick="withdrawCustomPrompt()">๐ฐ ุณุญุจ ูุจูุบ ูุฎุตุต</button>
    </div>
    <p id="msgWithdraw"></p>

    <h3>๐ ุณุฌู ุงูุนูููุงุช</h3>
    <div id="history" class="history"></div>

    <button onclick="showProfile()">โฌ ุฅุนุฏุงุฏุงุช</button>
  </div>

</div>

<!-- Confirm Modal -->
<div id="confirmModal" class="modal" style="display:none">
  <div class="modal-content">
    <p id="confirmText"></p>
    <button onclick="confirmRecharge()">ูุนู</button>
    <button onclick="cancelRecharge()">ุฅูุบุงุก</button>
  </div>
</div>

<script src="stake.js"></script>
<script>
  // ----------------- ุงูุณุญุจ ุจูุจูุบ ูุฎุตุต ูู ุญูู Input ุฏุงุฎู ุงููุชุฌุฑ -----------------
  function withdrawCustomPrompt(){
    let input = prompt("ุฃุฏุฎู ุงููุจูุบ ุงูุฐู ุชุฑูุฏ ุณุญุจู:");
    let amount = Number(input);
    if(isNaN(amount) || amount <= 0){
      msgWithdraw.innerText = "โ ุฃุฏุฎู ูุจูุบ ุตุงูุญ";
      return;
    }
    if(confirm(`ูู ุชุฑูุฏ ุณุญุจ ${amount}$ ูู ุฑุตูุฏูุ`)){
      processWithdraw(amount);
    }
  }
</script>
</body>
</html>
